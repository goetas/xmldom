<?xml version="1.0" encoding="UTF-8"?>
<project name="xmldom" default="build" basedir=".">

	<property name="source" value="../src" />
	<property name="testdir" value="../tests" />

	<target name="clean" description="Clean up and create artifact directories">
		<delete dir="${basedir}/build/api" />
		<delete dir="${basedir}/build/code-browser" />
		<delete dir="${basedir}/build/coverage" />
		<delete dir="${basedir}/build/logs" />
		<delete dir="${basedir}/build/pdepend" />

		<mkdir dir="${basedir}/build/api" />
		<mkdir dir="${basedir}/build/code-browser" />
		<mkdir dir="${basedir}/build/coverage" />
		<mkdir dir="${basedir}/build/logs" />
		<mkdir dir="${basedir}/build/pdepend" />
	</target>

	<target name="phpunit" description="Run unit tests using PHPUnit">
		<exec executable="phpunit" failonerror="true">

			<arg value="-c" />
			<arg path="${testdir}/phpunit.xml" />

			<arg value="--log-junit" />
			<arg path="${basedir}/build/logs/junit.xml" />

		</exec>
	</target>

	<target name="build" depends="clean,phpunit" />

</project>